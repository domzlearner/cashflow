{% extends 'main/base.html' %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Add Transaction</h1>
<form method="post" class="bg-white p-6 rounded shadow">
    {% csrf_token %}
    {% for field in form %}
    <div class="mb-4 {% if field.name == 'expense_category' %}hidden{% endif %}" id="{{ field.name }}_field">
        <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
            {{ field.label }}
        </label>
        {{ field }}
        {% if field.errors %}
        <p class="text-red-500 text-xs mt-1">{{ field.errors.0 }}</p>
        {% endif %}
    </div>
    {% endfor %}
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
        Add Transaction
    </button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const transactionTypeField = document.getElementById('id_transaction_type');
        const expenseCategoryField = document.getElementById('expense_category_field');

        function toggleExpenseCategory() {
            if (transactionTypeField.value === 'expense') {
                expenseCategoryField.classList.remove('hidden');
            } else {
                expenseCategoryField.classList.add('hidden');
            }
        }

        transactionTypeField.addEventListener('change', toggleExpenseCategory);
        toggleExpenseCategory();
    });
</script>
{% endblock %}